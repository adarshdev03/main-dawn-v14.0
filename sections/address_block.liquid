{{ 'main-addresses.css' | asset_url | stylesheet_tag }}

<script src="{{ 'customer.js' | asset_url }}" defer></script>
<div class="addresses-bg"></div>
{%- paginate customer.addresses by 5 -%}
  <div class="customer addresses section-{{ section.id }}-padding padding" data-customer-addresses>
    <div class="container">
      <div class="addresses-inner">
        <div class="addresses-heading">
          <h1>Addresses</h1>
        </div>
        <div class="return_account">
          <a href="{{ routes.account_url }}">
            Return to account details
          </a>
        </div>
        <div class="add_address" data-address>
      <button
        class="add_address_btn"
        type="button"
        aria-expanded="false"
        aria-controls="AddAddress"
      >
      <svg enable-background="new 0 0 50 50" height="16px" id="Layer_1" version="1.1" viewBox="0 0 50 50" width="16px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><rect fill="none" height="50" width="50"/><line fill="none" stroke="#ffffff" stroke-miterlimit="10" stroke-width="4" x1="9" x2="41" y1="25" y2="25"/><line fill="none" stroke="#ffffff" stroke-miterlimit="10" stroke-width="4" x1="25" x2="25" y1="9" y2="41"/></svg>
      Add a new address
      </button>
      <div id="AddAddress" class="address_form">
    

        <header class="address-main-heading">
          <p>
             <svg xmlns="http://www.w3.org/2000/svg" width="36" height="28" class="icon icon--header-cart" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 469.74"><path d="M412.27 270.29c55.1 0 99.73 44.66 99.73 99.72 0 55.1-44.66 99.73-99.73 99.73-55.09 0-99.72-44.65-99.72-99.73 0-55.1 44.65-99.72 99.72-99.72zM232.93 0c31.47 0 61.6 6.3 89.09 17.69l.91.42c28.11 11.79 53.42 28.94 74.62 50.15 21.54 21.56 38.85 47.2 50.62 75.61 11.4 27.49 17.69 57.61 17.69 89.06 0 8.19-.43 16.3-1.27 24.27a122.985 122.985 0 0 0-34.04-10.18c.33-4.65.49-9.35.49-14.09 0-26.89-5.32-52.48-14.97-75.74a198.26 198.26 0 0 0-43.01-64.33c-18.1-18.13-39.61-32.72-63.49-42.74l-.87-.33c-23.27-9.65-48.85-14.97-75.77-14.97-26.91 0-52.5 5.32-75.76 14.97-24.26 10.02-46.07 24.74-64.31 43.01-18.13 18.1-32.72 39.63-42.74 63.5l-.33.87c-9.65 23.26-14.97 48.85-14.97 75.76 0 26.92 5.32 52.51 14.97 75.77a196.78 196.78 0 0 0 22.99 40.95c20.35-12.65 69.85-20.22 90.3-26.7 20.41-6.48 22.39-8.05 28.13-25.13-7.37-6.3-14.49-16.16-15.68-29.16l-.98.01c-2.24-.02-4.4-.54-6.42-1.69-3.24-1.85-5.52-5.01-7.06-8.58-5.2-10.26-11.3-35.05 2.36-32.81l-1.7-3.2c-.32-3.97-.4-8.76-.49-13.8-.29-18.51-.67-40.95-15.55-45.45l-6.39-1.93c32.31-40.07 90.88-98.25 137.91-40.99 47.49 4.62 62.64 75.91 30.06 107.38 1.95.07 3.8.53 5.43 1.4 6.2 3.32 6.4 10.52 4.77 16.59-1.61 5.05-3.65 10.91-5.59 15.83-2.35 6.66-5.78 7.9-12.42 7.18-.29 14.38-9.63 21.25-18.81 29.22 7.43 10.67 9.92 15.37 18.73 20.06-7.33 15.86-11.44 33.52-11.44 52.13 0 17.78 3.73 34.69 10.46 49.99l.23.52.13.28.1.22.24.52.07.15.15.35.24.51.02.03.22.47.19.42.05.09.24.5.25.51.25.51.07.15.17.34.25.5.01.04.25.46.2.41.05.08.25.49.16.29.11.22.26.48.09.17.17.32.27.5.01.03.26.46.21.4.06.08.27.48.16.29c3.79 6.68 8.17 12.99 13.12 18.84a232.552 232.552 0 0 1-84.25 15.76c-31.45 0-61.58-6.3-89.08-17.7l-.92-.41c-28.12-11.79-53.42-28.95-74.62-50.15-21.49-21.5-38.79-47.14-50.59-75.6C6.3 294.53 0 264.41 0 232.93c0-31.47 6.3-61.59 17.69-89.08l.41-.92c11.8-28.11 28.95-53.42 50.16-74.61 21.5-21.5 47.12-38.8 75.6-50.6C171.34 6.3 201.46 0 232.93 0zm162.75 326.72c-.04-4.9-.49-8.4 5.58-8.31l19.68.24c6.34-.04 8.03 1.97 7.95 7.93v26.83h26.68c4.89-.05 8.39-.49 8.3 5.58l-.24 19.67c.04 6.35-1.97 8.03-7.92 7.96h-26.82v26.81c.08 5.96-1.61 7.97-7.95 7.93l-19.68.24c-6.07.09-5.62-3.41-5.58-8.31v-26.67h-26.83c-5.95.07-7.96-1.61-7.92-7.96l-.24-19.67c-.09-6.07 3.41-5.63 8.3-5.58h26.69v-26.69z"/></svg>
             Add a new address
          </p>
          
          <div id="svgBack">
            <svg focusable="false" width="14" height="14" class="icon icon--close   " viewBox="0 0 14 14">
              <path d="M13 13L1 1M13 1L1 13" stroke="currentColor" stroke-width="2" fill="none"></path>
           </svg>
            </div>
       </header> 


    {%- form 'customer_address', customer.new_address, aria-labelledBy: 'AddressNewHeading' -%}
      <p class="form__info">Please fill in the fields below:</p>
        
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressFirstNameNew"
              name="address[first_name]"
              value="{{ form.first_name }}"
              autocomplete="given-name"
              placeholder=" "
            >
            <label class="set_lable" for="AddressFirstNameNew">first name</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressLastNameNew"
              name="address[last_name]"
              value="{{ form.last_name }}"
              autocomplete="family-name"
              placeholder=" "
            >
            <label class="set_lable" for="AddressLastNameNew">last name</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressCompanyNew"
              name="address[company]"
              value="{{ form.company }}"
              autocomplete="organization"
              placeholder=" "
            >
            <label class="set_lable" for="AddressCompanyNew">address company</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressAddress1New"
              name="address[address1]"
              value="{{ form.address1 }}"
              autocomplete="address-line1"
              placeholder=" "
            >
            <label class="set_lable" for="AddressAddress1New">address 1</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressAddress2New"
              name="address[address2]"
              value="{{ form.address2 }}"
              autocomplete="address-line2"
              placeholder=" "
            >
            <label class="set_lable" for="AddressAddress2New">address 2</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              class="address-input-control"
              id="AddressCityNew"
              name="address[city]"
              value="{{ form.city }}"
              autocomplete="address-level2"
              placeholder=" "
            >
            <label class="set_lable" for="AddressCityNew">city</label>
          </div>
          <div class="new_addresses_field">
            <label class="set_lable" for="AddressCountryNew">country</label>
            <div class="select">
              <select
              class="select_edit_option"
                id="AddressCountryNew"
                name="address[country]"
                data-default="{{ form.country }}"
                autocomplete="country"
              >
                {{ all_country_option_tags }}
              </select>
             
            </div>
          </div>
          <div class="new_addresses_field" id="AddressProvinceContainerNew" >
            <label for="AddressProvinceNew">province</label>
            <div class="select">
              <select
              class="select_edit_option"
                id="AddressProvinceNew"
                name="address[province]"
                data-default="{{ form.province }}"
                autocomplete="address-level1"
              ></select>
             
            </div>
          </div>
          <div class="new_addresses_field">
            <input
              type="text"
              class="customer_addresses_input"
              id="AddressZipNew"
              class="address-input-control"
              name="address[zip]"
              value="{{ form.zip }}"
              autocapitalize="characters"
              autocomplete="postal-code"
              placeholder="zip code"
            >
            <label class="set_lable" for="AddressZipNew">zip code</label>
          </div>
          <div class="new_addresses_field">
            <input
              type="tel"
              id="AddressPhoneNew"
              name="address[phone]"
              value="{{ form.phone }}"
              autocomplete="tel"
              placeholder="phone"
            >
            <label class="set_lable" for="AddressPhoneNew">phone</label>
          </div>
          <div class="new_addresses_field">
            {{ form.set_as_default_checkbox }}
            <label  for="address_default_address_new">set default</label>
          </div>
          <div class="new_addresses_field">
            <button class="">add</button>
            <button class="" type="reset">Reset data</button>
          </div>
          <div class="return_account">
          <a href="{{ routes.account_url }}">
            return
          </a>
    </div>
    {%- endform -%}
      </div>
    </div>
    {%- if paginate.pages > 1 -%}
      {%- if paginate.parts.size > 0 -%}
        <nav class="pagination" role="navigation" aria-label="label">
          <ul role="list">
            {%- if paginate.previous -%}
              <li>
                <a href="{{ paginate.previous.url }}" aria-label="previous">
                  <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                  </svg>
                </a>
              </li>
            {%- endif -%}

            {%- for part in paginate.parts -%}
              <li>
                {%- if part.is_link -%}
                  <a href="{{ part.url }}" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                    {{- part.title -}}
                  </a>
                {%- else -%}
                  {%- if part.title == paginate.current_page -%}
                    <span aria-current="page" aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                      {{- part.title -}}
                    </span>
                  {%- else -%}
                    <span>{{ part.title }}</span>
                  {%- endif -%}
                {%- endif -%}
              </li>
            {%- endfor -%}

            {%- if paginate.next -%}
              <li>
                <a href="{{ paginate.next.url }}" aria-label="next">
                  <svg aria-hidden="true" focusable="false" viewBox="0 0 10 6">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
                  </svg>
                </a>
              </li>
            {%- endif -%}
          </ul>
        </nav>
      {%- endif -%}
    {%- endif -%}
   
        <ul class="address-details" role="list">
            {%- for address in customer.addresses -%}
          <li class="address-info" data-address>
           <div class="address_default">
            {%- if address == customer.default_address -%}
              <h2>Default</h2>
            {%- endif -%}
           </div> 
            {{ address | format_address }}
            <button
              type="button"
              class="button Edit_address"
              id="EditFormButton_{{ address.id }}"
              aria-label="edit_address {{ forloop.index }}"
              aria-controls="EditAddress_{{ address.id }}"
              aria-expanded="false"
              data-address-id="{{ address.id }}"
            >
          Edit
            </button>
            <button
              type="button" 
              class="button"
              aria-label="delete {{ forloop.index }}"
              data-target="{{ address.url }}"
              data-confirm-message="delete_confirm"
            >
            Delete
            </button>
            <div id="EditAddress_{{ address.id }}" class="edit_address">
              <h2>Edit Address</h2>
              {%- form 'customer_address', address -%}
                <div class="addresses_field">
                  <label for="AddressFirstName_{{ form.id }}">First Name</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressFirstName_{{ form.id }}"
                    name="address[first_name]"
                    value="{{ form.first_name }}"
                    autocomplete="given-name"
                    placeholder="first name"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressLastName_{{ form.id }}">Last Name</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressLastName_{{ form.id }}"
                    name="address[last_name]"
                    value="{{ form.last_name }}"
                    autocomplete="family-name"
                    placeholder="last_name"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressCompany_{{ form.id }}">company</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressCompany_{{ form.id }}"
                    name="address[company]"
                    value="{{ form.company }}"
                    autocomplete="organization"
                    placeholder="company"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressAddress1_{{ form.id }}">address1</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressAddress1_{{ form.id }}"
                    name="address[address1]"
                    value="{{ form.address1 }}"
                    autocomplete="address-line1"
                    placeholder="address1"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressAddress2_{{ form.id }}">address2</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressAddress2_{{ form.id }}"
                    name="address[address2]"
                    value="{{ form.address2 }}"
                    autocomplete="address-line2"
                    placeholder="address2"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressCity_{{ form.id }}">city</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressCity_{{ form.id }}"
                    name="address[city]"
                    value="{{ form.city }}"
                    autocomplete="address-level2"
                    placeholder="city"
                  >
                </div>
                <div  class="addresses_field">
                  <label for="AddressCountry_{{ form.id }}">
                    country
                  </label>
                  <div class="select">
                    <select
                    class="select_edit_option"
                    id="AddressCountry_{{ form.id }}"
                    name="address[country]"
                    data-address-country-select
                    data-default="{{ form.country }}"
                    data-form-id="{{ form.id }}"
                    autocomplete="country"
                    >
                      {{ all_country_option_tags }}
                    </select>
                 
                  </div>
                </div>
                <div  class="addresses_field" id="AddressProvinceContainer_{{ form.id }}" >
                  <label for="AddressProvince_{{ form.id }}">
                    province
                  </label>
                  <div class="select">
                    <select
                      class="select_edit_option"
                      id="AddressProvince_{{ form.id }}"
                      name="address[province]"
                      data-default="{{ form.province }}"
                      autocomplete="address-level1"
                    ></select>
                 
                  </div>
                </div>
                <div class="addresses_field">
                  <label for="AddressZip_{{ form.id }}">Zip</label>
                  <input
                    type="text"
                    class="customer_addresses_input"
                    id="AddressZip_{{ form.id }}"
                    name="address[zip]"
                    value="{{ form.zip }}"
                    autocapitalize="characters"
                    autocomplete="postal-code"
                    placeholder="Zip"
                  >
                </div>
                <div class="addresses_field">
                  <label for="AddressPhone_{{ form.id }}">phone</label>
                  <input
                    type="tel"
                    id="AddressPhone_{{ form.id }}"
                    name="address[phone]"
                    value="{{ form.phone }}"
                    autocomplete="tel"
                    placeholder="phone"
                  >
                </div>
                <div class="addresses_field">
                  {{ form.set_as_default_checkbox }}
                  <label for="address_default_address_{{ form.id }}">
                    Set Default
                  </label>
                </div>
                <div class="addresses_field">
                  <button class="">Update</button>
                  <button class="cancel" type="reset">Cancel</button>
                </div>
              {%- endform -%} 
            </div>
          </li>
           {%- endfor -%}
        </ul>
      </div>
    </div>
  </div>
{%- endpaginate -%}

<script>
    window.addEventListener('load', () => {
      typeof CustomerAddresses !== 'undefined' && new CustomerAddresses();
    });

    $('.add_address_btn').on('click', function(e) {
      e.preventDefault();
      $(".gradient").css("overflow", "hidden");
      $('.address_form').addClass('active');
      $('.addresses-bg').addClass('active');
    });

    $('#svgBack').on('click', function(e) {
      e.preventDefault();
      $(".gradient").removeAttr("style");
      $('.address_form').removeClass('active');
      $('.addresses-bg').removeClass('active');
    });

    $('.addresses-bg').on('click', function(e) {
      e.preventDefault();
      $(".gradient").removeAttr("style");
      $('.address_form').removeClass('active');
      $('.addresses-bg').removeClass('active');
    });
    
    document
    .querySelectorAll(".address-info button")
    .forEach((button) => {
    button.addEventListener("click", async () => {
      const rootItem =
        button.parentElement;
      const key = rootItem.getAttribute("data-line-item-key");
      $(".edit_address").removeClass("active");
      rootItem.querySelector(".edit_address").classList.add("active");
    });
});


$('.cancel').on('click', function(e) {
  $(".edit_address").removeClass("active");
});

</script>

